server {
        # Redirect all HTTP traffic to HTTPS since daloRADIUS requires an HTTPS connection
        listen 80; # Change this to match your HotSpot IP address
        server_name hotspot.DOMAINNAME; # Change this to your domain name
        return 301 https://$server_name$request_uri;
}

server {
        listen 443 ssl; # Change this to match your HotSpot IP address
        server_name hotspot.DOMAINNAME;  # Change this to your domain name

        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        include snippets/snakeoil.conf;

        # Replace your signed ssl certificate 
        # ssl_certificate /etc/ssl/certs/<public_key_of_ssl_certificate_here>.pem;
        # ssl_certificate_key /etc/ssl/private/<private_key_of_ssl_certificate_here>.key;


        root /var/www/hotspot.DOMAINNAME; # Change this to match the folder of your hotspot app
        index hotspotlogin.php index.php index.phtml index.html index.htm;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ /index.php?$args /hotspotlogin.php?$args $uri/ =404;
        }
    
        location ~ \.php$ {
                include snippets/fastcgi-php.conf;
                fastcgi_pass unix:/run/php/php7.3-fpm.sock; # check the php-fpm.conf configuration listen directive
        }
}